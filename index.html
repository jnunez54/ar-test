<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR Simple</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>

<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
  
  <a-assets>
    <!-- Modelo 3D (Sketchfab exportado a glTF) -->
    <a-asset-item id="model" src="models/marcus.gltf"></a-asset-item>

    <!-- Audio -->
    <audio id="audio" src="audio/audio.mp3"></audio>
  </a-assets>

  <!-- Marker -->
  <a-marker id="marker" preset="hiro">

    <!-- Modelo -->
    <a-entity
      id="ar-model"
      gltf-model="#model"
      position="0 0.5 0"
      rotation="0 0 0"
      scale="0.05 0.05 0.05"
      animation-mixer>
    </a-entity>

  </a-marker>

  <!-- CÃ¡mara -->
  <a-entity camera></a-entity>
</a-scene>

<script>
  const marker = document.querySelector('#marker');
  const audio = document.querySelector('#audio');

  let playing = false;

  marker.addEventListener('markerFound', () => {
    if (!playing) {
      audio.currentTime = 0;
      audio.play().catch(e => console.warn('Audio error:', e));
      playing = true;
    }
  });

  marker.addEventListener('markerLost', () => {
    audio.pause();
    audio.currentTime = 0;
    playing = false;
  });
</script>

</body>
</html>
